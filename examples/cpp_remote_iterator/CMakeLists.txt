project(remote_iterator)

set(SRC
    remote_iterator.cpp
)

install(DIRECTORY DESTINATION remote_iterator)
#file(COPY ${CMAKE_BINARY_DIR}/src/server/aeon-server DESTINATION ./server/)
file(COPY ${TEST_DATA_DIR}/flowers.jpg DESTINATION server/)
file(COPY ${TEST_DATA_DIR}/img_2112_70.jpg DESTINATION server/)

add_executable(remote_iterator ${SRC})
add_custom_command(TARGET remote_iterator POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E make_directory ./server
    COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_BINARY_DIR}/src/server/aeon-server ./server/)
target_link_libraries(remote_iterator aeon pthread sox ${CURL_LIBRARIES} opencv_imgproc opencv_highgui opencv_core ${PYTHON_LIBRARIES})
add_dependencies(remote_iterator aeon)
